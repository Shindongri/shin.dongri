---
title: 「리팩터링 2판」 을 읽으며 ①
date: "2020-06-05T00:00:00.000Z"
---

리팩터링의 정의와 리팩터링을 하는 이유

<!-- more -->

<a style="display: flex; justify-content: center; padding: 0 10%;" href="http://www.yes24.com/Product/Goods/89649360" rel="noopener noreferer">
    <img src="https://image.yes24.com/goods/89649360/800x0" style="width: 100%;" />
</a>

개발자라면 모두들 리팩터링의 중요성은 당연히 인지하고 있다고 생각하지만

이게 **왜 ? 그래서 어떻게 ?** 라는 질문으로 이어진다면 쉽게 답변하기 어려운 부분이라 여겨진다.

책에 따르면 나는 주로 **계획된 리팩터링**을 하고 있다.

이거 라도 (?) 하고 있다는 것에 자기 위안을 삼곤 했는데, 권하지 않는 방향이라 설명된 걸 보고 적잖이 놀랐다.

> 리팩터링은 코드를 작성하는데 스며들어 드러나지 않게, 기회가 될 때마다 해야된다는 것이다.

이를 계기로 리팩터링에 대한 내 관념을 바꾸는 기회가 되었으면 하는 마음에 서평과 내용 정리를 남겨본다.

---

## 리팩토링의 정의
<br />

#### - 명사적 정의

**리팩터링**: [명사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 코드를 이해하고 수정하기 쉽도록 내부 구조를 변경하는 기법

#### - 동사적 정의

**리팩터링(하다)**: [동사] 소프트웨어의 겉보기 동작은 그대로 유지한 채, 여러 가지 리팩터링 기법을 적용해서 소프트웨어를 재구성한다.

---

## 리팩터링하는 이유
<br />

#### - 리팩터링하면 소프트웨어 설계가 좋아진다.

리팩터링하지 않으면 소프트웨어의 내부 설계(아키텍쳐)가 썩기 쉽다.

아키텍처를 충분히 이해하지 못한 채 단기 목표만을 위해 코드를 수정하다 보면 기반 구조가 무너지기 쉽다.

같은 일을 하더라도 설계가 나쁘면 코드가 길어지기 십상이다.

그래서 **중복 코드 제거**는 설계 개선 작업의 중요한 한 축을 차지한다.

코드량을 줄인다고해서 시스템이 빨라지는 것은 아니지만 **수정하는 데 드는 노력은 크게 달라진다.**

비슷한 일을 하는 코드가 산재해 있다면 한 부분만 살짝 바꿔서는 시스템이 예상대로 작동하지 않을 수 있다. 

반면 중복 코드를 제거하면 모든 코드가 언제나 고유한 일을 수행함을 보장할 수 있으며, 이는 바람직한 설계의 핵심이다.

#### - 리팩터링하면 소프트웨어를 이해하기 쉬워진다.

프로그래밍은 여러 면에서 마치 컴퓨터와 대화하는 것과 같다. 

따라서, 프로그래밍은 결국 내가 원하는 바를 정확히 표현하는 일이다.

그런데, 내 소스 코드를 컴퓨터만 사용하는 게 아니다.

몇 달이 지나 누군가 혹은 나 자신이 내 코드를 수정하고자 읽게 될 수 있다.

이 점에서 리팩터링은 코드가 더 잘 읽히게 도와준다. 잘 작동하지만 이상적인 구조는 아닌 코드가 있다면, 리팩터링을 해보자.

코드의 목적이 더 잘 드러나게, 다시 말해 내 의도를 더 명확하게 전달하도록 개선할 수 있다.

#### - 리팩터링하면 버그를 쉽게 찾을 수 있다.

코드를 이해하기 쉽다는 말은 버그를 찾기 쉽다는 말이기도 하다.

리팩터링을 하면 코드가 하는 일을 깊이 파악하게 되면서 새로 깨달은 것을 곧바로 코드에 반영하게 된다.

프로그램의 구조를 명확하게 다듬으면 그냥 '이럴 것이다'라고 가정하던 점들이 분명히 드러나는데, 버그를 지나치려야 지나칠 수 없을 정도까지 명확해진다.

#### - 리팩터링하면 프로그래밍 속도를 높일 수 있다.

지금까지 제시한 장점들을 한 마디로 정리하면 리팩터링하면 코드 개발 속도를 높일 수 있다는 것이다.

한 시스템을 오래 개발 중인 개발자들의 얘기를 들어보면 초기에는 진척이 빨랐지만 현재는 새 기능을 하나 추가하는 데 훨씬 오래 걸린다는 말을 한다.

새로운 기능을 추가할수록 기존 코드베이스에 잘 녹여낼 방법을 찾는 데 드는 시간이 늘어난다는 것이다.

이렇게 되는 원인은 소프트웨어의 내부 품질에 있다. 내부 설계가 잘 된 소프트웨어는 새로운 기능을 추가할 지점과 어떻게 고칠지를 쉽게 찾을 수 있다.

코드가 명확하면 버그를 만들 가능성도 줄고, 버그를 만들더라도 디버깅하기가 훨씬 쉽다. 내부 품질이 뛰어난 코드베이스는 새 기능 구축을 돕는 견고한 토대가 된다.

이 효과를 [설계 지구력 가설(Design Stamina Hypothesis)](https://martinfowler.com/bliki/DesignStaminaHypothesis.html) 라고 부른다. 

내부 설계에 심혈을 기울이면 소프트웨어의 지구력이 높아져서 빠르게 개발할 수 있는 상태를 더 오래 지속할 수 있다.

